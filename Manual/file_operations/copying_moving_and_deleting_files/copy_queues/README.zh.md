# 复制队列

在资源管理器中，如果您启动了复制（或移动）操作，然后在操作仍在运行时启动了另一个操作，则这两个操作将在并行模式下运行。这可能是不可取的，因为在并行模式下读写同一设备通常比串行模式慢。如果两个副本涉及同一物理硬盘驱动器，则驱动器磁头需要连续来回寻道（“寻道过多”），因而降低整体传输速度。同样，通过网络传输文件时，多个同时传输操作经常会降低整体吞吐量。为避免这种情况，Opus 提供了一个复制队列系统，其中可将多个文件复制（或移动）操作排队，顺序执行，而不是并行执行。

![](/Manual/images/media/13/copy_queue.png)

### 进度指示器队列标签页

在排队复制作业后，将向进度指示器添加一个队列标签页，以显示排队作业的摘要（如上图所示）。您可以使用每个排队作业旁边的控件来管理队列（更改队列顺序、立即开始作业或取消排队作业）。

默认情况下，Opus 会在作业自动排队时通知您，但您可以在配置中的 **[文件操作/复制文件](/Manual/preferences/preferences_categories/file_operations/copying_files/README.zh.md)** 页面的 **排队作业时显示确认** 选项中禁用此消息。请注意，当作业排队后，单击进度对话框底部的 **取消** 按钮将使您可以选择仅取消当前正在执行的作业或所有作业。

### 自动排队规则

默认情况下，如果满足下述条件，则会自动使用复制队列：

- **目的地** 是某个固定本地驱动器，并且对同一物理驱动器有另一个操作正在进行中。（同一物理驱动器上的多个分区被视为相同。）
- **源** 是网络共享、可移动驱动器或 FTP 站点，并且对同一内容的另一个复制操作正在进行中。
- **目的地** 是网络共享、可移动驱动器或 FTP 站点，并且对同一内容的另一个复制或移动操作正在进行中。
- **目的地** 是某个压缩包，并且对同一压缩包的另一个复制或移动操作正在进行中。
- 对于所有其它复制和移动操作，如果与同一 **源** 和 **目的地** 的操作正在进行中，则将使用该队列。

这些只是默认规则。配置设置、命令参数和脚本加载项可以覆盖复制的时机和方式。

各规则之间没有交互作用。最终，每个复制或移动在开始时都会被分配到特定队列中，并在同一队列中的其它操作之后等待，而其它队列中的操作可以并行运行。例如，如果您正在复制到 D: 驱动器上的压缩包中，则该复制将被分配到该压缩包的队列中；如果您开始向同一压缩包复制另一个文件，它将在同一队列中，并在第一个复制之后等待；但是，如果您随后开始向 D: 驱动器上的一个普通文件夹复制第三个文件，它将被分配到一个不同的队列，并且并行运行，尽管这三个操作都与同一驱动器有关。复制到同一压缩包中的这两个副本最终会进入一个队列（由于与压缩包有关的优先级较高的规则），而复制到普通文件夹中的第三个副本最终会进入另一个队列（由于与固定本地驱动器有关的优先级较低的规则）。

### 手动队列管理

通常，Opus 会自动管理复制队列（如上所述），但如果需要，您可以使用内部 **[复制](/Manual/reference/command_reference/internal_commands/copy.zh.md)** 命令来手动管理队列。使用 **队列** 参数，您可以创建一个具有指定名称的队列（此名称随后将显示在进度对话框的标题栏中）。

例如，命令 `复制 队列=我的队列` 将使用队列 *我的队列* 复制选定的文件。然后，您可以配置一个按钮或热键，以便在按住特定键（例如 **Shift**）时使用您的指定队列来复制 - 这样，您就可以在需要时强制使用队列，即使 Opus 通常不会对该操作进行排队。

请参阅内部 **[复制](/Manual/reference/command_reference/internal_commands/copy.zh.md)** 命令的说明，以获取有关使用 **队列** 参数的更多详细信息，以及 [自定](/Manual/customize/README.zh.md) 部分，以获取有关如何创建自己的按钮或热键的信息。

您可以在配置中的 **[复制文件](/Manual/preferences/preferences_categories/file_operations/copying_files/README.zh.md)** 页面的 **自动管理文件复制队列** 选项中完全禁用自动排队。

更多信息： [无人值守操作](/Manual/file_operations/copying_moving_and_deleting_files/copy_queues/unattended_operation.zh.md)