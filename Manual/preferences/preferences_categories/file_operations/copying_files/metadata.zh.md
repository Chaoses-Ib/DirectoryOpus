# 元数据

### 复制可选数据流

此选项控制存储在 NTFS “可选数据流”(ADS) 中的元数据的复制。此元数据可以包含评论、标签、评级信息和[标签](%2FManual%2Ffile_operations%2Flabels.zh.md)，具体取决于涉及的文件格式和配置。

此选项仅适用于存储在单独 NTFS 数据流中的元数据。例如，Office 文档将作者姓名和评论等内容存储在主文件本身中，因此这些元数据始终将被复制。另一方面，基本文本文件没有直接存储此类数据的设备，但可以在独立流中添加。

NTFS ADS 不能存储在使用 NTFS 以外的文件系统的驱动器上。将向 FAT32 或 ExFAT 等文件系统（通常用于 USB 记忆棒）复制时、将向某些网络驱动器（通常在服务器未运行 Windows 的情况下）复制时、将向压缩包中复制时以及将向 FTP 网站上复制时，存储在 NTFS ADS 中的任何元数据都将丢失。

- **复制到新文件：**在可能的情况下，总是将 NTFS ADS 元数据复制到新文件，即使花费额外时间。如果您希望复制，请选择此项。
- **复制到新文件，除非速度变慢：**在能够且不会花费额外时间的情况下，将 NTFS ADS 元数据复制到新文件。如果您不关心是否复制，而只是需要最快的复制速度，请选择此项。
- **从此新文件中删除：**即使花费额外时间，也能主动阻止将 NTFS ADS 元数据复制到新文件。如果您真的不想复制，请选择此项。

此处做出的选择可通过 `Copy` 命令的 `COPYPROPERTIES` 参数进行覆盖。

速度因素取决于文件的复制方式，可以通过 `copy_allow_delegation`（[配置/杂项/高级](%2F%2Fmiscellaneous%2Fadvanced_options.zh.md)）进行配置，并可以通过 `Copy` 命令的 `DELEGATE` 参数进行覆盖：

默认情况下，文件复制将委托给 Windows 提供的高级 API。当该 API 将一个文件从一个 NTFS 设备复制到另一个 NTFS 设备时，它始终复制附加到该文件的所有 ADS 流（无法告诉它不这样做）。这意味着总是会花费一点额外时间来复制 ADS 流，但这通常会被 API 在其它方面的速度提升所抵消。但是，如果您真的不希望保留 ADS 流，那么在 API 复制它们后，必须花费额外时间来删除它们。

另一方面，如果您配置 Opus 使用自定义的、较低级别的代码复制文件，则 Opus 可以在需要复制 NTFS ADS 流时选择何时复制，并且只会在您真正需要它们时才复制它们。这可能会稍快一些，但自定义代码在其它方面也可能更慢（具体取决于硬件、驱动程序等）。

### 复制文件说明

这将尝试保留分配给已复制文件的所有说明（如果尚未通过上面的 **复制到新文件** 选项将其保留）。

这可通过 `Copy` 命令的 `COPYDESC` 参数进行覆盖。

启用此选项会在复制时增加每个文件的开销。您通常只应在使用 DESCRIPT.ION 文件注释系统（在每个文件夹中将说明存储为特殊文件）时启用此选项。如果您使用 NTFS ADS 存储文件注释，请改用上面的 **复制到新文件** 选项。

### 作为稀疏文件复制稀疏文件

稀疏文件是 NTFS 文件系统的一项特殊功能，允许将文件区域标记为“空”（包含所有零字节），这些区域不占用任何驱动器空间。例如，一个由所有零组成的 1GB 稀疏文件几乎不占用任何空间。稀疏文件用于虚拟机等专门应用中。一些下载工具还使用它们来跟踪文件的哪些区域已下载。

通常情况下，复制稀疏文件会导致不再是稀疏的副本，这意味着副本在磁盘上占用其全部大小，并且空白区域看起来像正常数据，无法与任何其它零序列区分开来。另一方面，如果您启用此选项，则源文件中的任何稀疏区域都将在副本中重新创建。

这可通过 `Copy` 命令的 `COPYSPARSE` 参数进行覆盖。

启用此选项将强迫 Opus 在复制稀疏文件时使用自定义的文件复制代码*。如果已启用，正常的文件仍将被委托给高级 API。