# 安全

在复制文件时控制文件权限和安全设置的选项。这些选项可以通过 `Copy` 命令的各种参数覆盖。在某些情况下，打开它们可能会产生额外的每个文件的开销。

- **复制文件所有权**：此选项复制文件所有者信息，假设源文件系统和目标文件系统支持文件所有者的 Windows 概念。通常，新复制的文件由执行复制操作的用户所有，但如果打开此选项，它们将归原始文件的所有者所有。由于设置文件所有者需要管理员权限，因此如果原始所有者不是当前用户，这可能会导致显示 UAC 提示。这可以通过 `Copy` 命令的 `COPYOWNER` 参数覆盖。
  - **仅限本地驱动器**：只会在本地驱动器上复制文件所有权，而不会复制到网络位置。

- **复制安全权限（在驱动器之间复制或移动时）**：这会针对每个副本复制每个文件的安全权限，假设源文件系统和目标文件系统支持 Windows 文件权限。关闭时，复制的文件将继承其复制到的文件夹的权限，这通常是您想要的。这可以通过 `COPYSECURITY` 参数覆盖。

### 在同一驱动器上移动时更新权限/加密以匹配目标

通常，当您在同一驱动器上移动一个文件（该操作不涉及创建新文件）时，它将保留其原始权限。当您将文件移动到具有不同权限的文件夹时，这可能会导致问题。例如，如果您将私有文件移动到共享公用文件夹中，则该文件将保留其原始权限，并且共享用户无法访问。启用此选项将导致 Opus 更新移动的文件的权限，以匹配其移动到的文件夹。

类似地，如果需要，将对移动的文件进行加密或解密以匹配目标文件夹的正常状态。（这是关于文件系统级别的加密，由 Windows/NTFS 提供并通过文件或文件夹的标准属性对话框控制，而不是任何其它类型的加密。）

这可以通过 `Copy` 命令的 `UPDATESECURITY` 参数覆盖。

- **即使会触发 UAC 提示，也要更新权限**：\<WRAP\>打开时，如果在没有提升的情况下移动文件，并且在更新其权限时出现访问被拒绝错误，Opus 将显示 UAC 提示并尝试再次提升权限来更新权限。关闭时，将不显示任何 UAC 提示，并且如果出现访问被拒绝错误，将跳过更新权限。

通常，尤其是在网络驱动器上，如果对一个文件夹授予权限以允许您在没有提升的情况下移动其内容，那么它要么允许您在没有提升的情况下修改权限（因此不需要 UAC 提示），要么完全阻止您修改权限（所以即使您提升，它仍然会失败，并且 UAC 提示只是一件令人烦恼的事）。

如果在移动实际文件（或之前的其中一个文件）时发生访问被拒绝错误，仍然始终会尝试 UAC 提升，并将重新使用提升上下文来更新文件权限，而无需第二个 UAC 提示。\</WRAP\>

- **更改所有权以匹配目标**：打开时，Opus 将尝试将文件的所属者设置为您目标文件夹的所有者帐户。关闭时，当文件在同一驱动器上移动时，所有者将保持原样。如果所有者没有更改，则可能会授予它额外的权限（例如，如果目标文件夹将权限传递给子文件上的 *CREATOR OWNER*）

- **保留显式（非继承）权限**：打开时，Opus 将保留对文件设置的任何显式非继承权限，并将其与从目标文件夹继承的新权限合并；只会删除旧的继承权限。关闭时，将删除所有旧权限，并用从目标继承的权限替换。