# 计算文件夹大小

在 Windows 中，通常只有文件大小容易看到 - 通常不会显示文件夹的（总）大小。这主要是因为文件系统不会跟踪文件夹的总大小。相反，显示文件夹的大小涉及读取该文件夹（及其所有子文件夹，递归）的内容并累加总大小。

### 文件夹大小计算

Opus 可以计算文件夹的大小并将其显示在文件列表中，就像它对文件大小所做的那样。

> [!NOTE]
> 如果你安装了 [Everything by voidtools](https://voidtools.com)，Opus 可以使用其搜索索引显著加快已编制索引位置的计算过程。

在 Directory Opus 中，有两种方法可以触发此行为 - 手动和自动。

### 触发手动计算

要手动计算一个或多个文件夹的大小，最简单的方法是选择有问题的文件夹，然后从 **编辑** 菜单中选择 **计算文件夹大小** 命令（或按 <kbd>Ctrl+K</kbd>）。如果你在未选择任何文件夹的情况下执行此命令，将计算当前文件列表中的所有子文件夹的大小。

触发单个文件夹手动计算的另一种方法是用鼠标悬停在它上面直到它的工具提示出现。文件夹的默认工具提示包含 `{foldersize}` 代码，因此显示文件夹的工具提示将触发对其内容的计数。使用此方法，你必须将鼠标悬停在文件夹上（从而使工具提示保持可见）直到计数完成。但是，如果已修改文件夹的 [信息提示](/Manual/file_types/filetype_editor/info_tip.zh.md) 以删除此代码，则此方法可能不起作用。

### 自动计算

还可以将 Opus 配置为在读取文件夹（或某些文件夹）时自动计算子文件夹的大小。[文件夹/文件夹大小](/Manual/preferences/preferences_categories/folders/folder_sizes/README.zh.md) 配置页上的选项控制此设置。

### 文件夹大小可能不准确

你应将文件夹大小视为一种参考，而不是像文件大小那样的确切大小。文件夹权限可能意味着 Opus 无法访问某些文件夹以对其进行计数。连接点和软链接也可能引起混淆 - Opus 允许你控制是否对其进行计数，但无论哪种方式都不是“正确”或“错误”的，并且计算出的大小有时会显著不同。

有时，你可能会看到文件夹大小前面显示有波浪号 (`~`) 字符。这表示显示的大小只是近似值。这可能出于以下两个原因：

- 在计算文件夹大小时，大小字段会逐步更新 - 波浪号表示计算尚未完成
- 波浪号还用于表示文件夹包含一个或多个无法读取的子文件夹（例如，由于权限设置为拒绝读取访问权限）。

请注意，在使用 Everything 计算文件夹大小时，你通常不会看到波浪号，这同样出于两个原因：

- 计算几乎是瞬间完成的，因此不存在渐进式的更新
- Everything 索引包括像 Opus 这样的应用程序通常无法访问的某些文件夹，因此权限错误的可能性要小得多

由于第二种原因，你可能会在使用 Everything 计算大小时得到与 Opus 使用传统方式计算时不同的结果。