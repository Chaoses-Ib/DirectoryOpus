# Directory Opus 13 - 详细发行说明

# 文件列表

- 可扩展文件夹：
  - （通过配置/文件列表/文件夹扩展”进行配置。）
  - 可扩展文件夹允许您扩展一个或多个文件夹，以便在主文件列表中查看，如同带有文件的文件树。
  - 类似于平面视图，但不会同时扩展所有内容，可以根据需要展开或折叠各个文件夹。
  - 在细节和增强模式中，缩进用于指示嵌套，如同树。
  - 在缩略图等其它模式中，可配置的背景颜色用于指示嵌套项，颜色的强度会随着项目嵌套的深度而变化。
  - 可随时显示可单击扩展程序，或在通过按钮/热键等触发扩展之前将其隐藏。
  - 默认热键是 Alt + 下箭头展开，Alt + 上箭头折叠。
  - 可选地，在拖动到子文件夹上时进行扩展。
  - [默认工具栏](default_toolbars.zh.md)包括同时展开/折叠所有文件夹的命令，以及选择当前所有展开文件夹下方的所有内容的命令。
  - 添加到“平面视图项”[文件类型](file_types.zh.md)的上下文菜单项也会在展开文件夹内嵌套的文件中显示。（允许特殊命令，例如导航到父文件夹，在不重新创建父级层次结构的情况下拷贝，移动到上一级等。）
- 配对文件夹：
  - （通过配置/常用路径/配对文件夹”进行配置。）
  - 配对文件夹是一个新概念，允许您将两个路径关联在一起，通常目的是并行处理它们。
  - 可以将对定义为两个绝对路径，或使用正则表达式。对可以匹配指定的对下方的其它文件夹，也可以仅应用于一个级别。
  - 对通常（但不总是）与导航锁定结合使用。（当导航锁定开启时，进入一侧的子文件夹会自动尝试进入另一侧的同一文件夹。向上移动一级将在两侧同时向上移动。）
  - 现在，如果您在单显示窗口中，并且当前文件夹属于一对，则导航锁定图标将启用，单击该图标将在双栏中打开另一个文件夹，同时启用导航锁定。
  - 您还可以配置文件夹对，以便任何打开双栏的方法都会将第二个显示转到对的另一半，而不是通常的初始文件夹。可以选择同时自动启用导航锁定。
  - 还可以配置 Opus，以便仅通过进入配对文件夹就自动打开双栏。因此，如果您总是需要在同时查看两个文件夹时查看它们，可以通过简单地导航到其中一个文件夹来实现。
  - 使用正则表达式构建的对允许您查找并替换一条路径的某些部分来创建另一条路径。例如，如果您在不同的位置有各种“生产”和“暂存”文件夹层次结构，则可以设置一条规则，让您在另一侧显示 \*\暂存\\，如果另一侧显示 \*\生产\\。
  - 对还可以与同步工具一起使用，因此在另一条路径上使用时可以自动选择一条路径。
- 鼠标：
  - 中键单击列标题现在滚动到文件列表的顶部（或底部，如果已在顶部）。可以通过单击左键然后单击中键快速更改排序顺序并跳到顶部，而无需移动鼠标。
  - 新选项，“仅通过单击图标（标签上为正常行为）”。让您可以在其图标上单击一次以打开文件，同时仍可以通过单击其标签正常选择它。
  - 新选项，“按 Alt + 单击以选择而不打开”。让您可以按住 Alt 键覆盖单击模式并正常选择文件。
  - 扩展文件夹背景单击事件。可以使用鼠标左键或中键在背景上单击，具体取决于按下哪个限定符（无、Alt、Shift、Ctrl），可以将其绑定到不同的事件。
  - 现在，可以使用中键切换文件选择（类似于在按住 Ctrl 的情况下单击左键）。
  - 现在，可以通过单击来触发文件类型中键双击事件，这与背景事件的相似选项是独立的。
  - 现在，在出现工具提示的情况下，可以通过在文件中单击和双击，此工具提示显示在鼠标指针下方（通常在屏幕底部）。
  - 在细节模式下，您现在可以通过在按住 Ctrl 的情况下单击未选中的文件来启动套索选择。使用全行选择更容易进行套索选择。这也可以关闭，或分配给不同的键。（注意：对于已选择的文件执行相同的操作仍然会启动拖放。）
  - 现在，可以配置拖动距离和双击距离。将拖动距离设置为 0 可以有效禁用拖放。这些距离现在随 DPI 缩放，而操作系统忽略了这一点。
  - 增强模式的范围选择键不再影响设置为自动取消选择的鼠标按钮。（该模式始终使用 Shift 键进行范围选择，这没有改变，并且为其配置不同的键不起作用。）
  - 增强模式的“自动取消选择”和新的“上下文菜单（自动取消选择）”按钮模式现在与细节模式中的相应鼠标左键和右键保持一致。特别是，如果您单击已经选定的文件，自动取消选择现在将取消选择所有其它文件。这使您能够在左键和/或右键上模仿细节模式的主要方面，同时覆盖其中一个按钮的操作。
  - 增强模式的新“设置焦点（不选择）”按钮模式允许您配置鼠标按钮以赋予文件列表焦点而不更改文件选择。再次单击并按住按钮会触发内联重命名。
  - 在某些按钮模式中添加了新的增强模式选项以启用延迟上下文菜单。（例如，可以将按钮设置为选择文件，但如果按住足够长的时间，它将触发上下文菜单。）
  - 添加选项以禁用鼠标下的项的热跟踪。
  - 改进了对通过键盘和类似方式滚动进行的热跟踪。
  - 现在，右键单击文件列表的滚动条会显示标准系统滚动条上下文菜单。
- 其它：
  - 现在，通过文件列表内的横幅显示读取文件夹时发生的错误，而不是通过必须关闭的弹出对话框显示。让您在不进行额外单击的情况下编辑路径或导航到其它位置。（可以在配置中关闭。）
  - 当导航锁定不同步时，现在可以将出现在文件列表上的警告/说明减少到不会造成太多障碍的更详细版本。
  - 当文件列表显示“配置文件”文件夹时，任何已移动到其它位置（因此实际上不在配置文件目录下）的特殊文件夹（例如“文档”）都将添加到文件列表中。这模仿了用户在文件资源管理器中习惯看到的内容。
  - 如果隐藏了文件扩展名，则内联重命名现在（最初）在所有显示模式中隐藏它们。（以前，这仅在细节和增强模式下才发生。）在重命名时，按下 <kbd>Ctrl+E</kbd> 热键以选择扩展名，如果隐藏了，则会显示它。
- 现在，您可以选择网格线是否在最后一个文件中停止或继续到窗口底部。
- 列表模式的列宽现在是独立的，而不是与详细信息/电源模式名称列宽关联的。（文件夹格式对话框，显示标签页。）
- 如果“自动选择新复制的文件”处于打开状态，那么文件列表中的鼠标活动现在会抑制其行为。（例如，如果您自己选择了一个文件，则复制到文件列表中的文件不会自动选择，也不会搞乱您的选择。）
- 现在，即使“自动选择新复制的文件”处于关闭状态，将图像/文本数据粘贴到文件夹中也会始终选择和滚动到新创建的文件。
- 在详细信息和电源模式中，在使用统一的缩略图和名称列时，缩略图（不只是名称）现在缩进以表示嵌套文件夹（通过平面视图或新的可展开文件夹）。
- 现在，按日期分组的文件列表会在午夜（或其它系统日期更改）之后重新计算。
- 命令：
  - `Go EXPANDBRANCH` -- 展开或折叠文件夹。可选参数包括：
    - “toggle” -- 对每个匹配/选定的项分别切换。
    - “toggleall” -- 将所有匹配/选定的项作为一个组进行切换。如果任何一项没有展开，则会展开所有项。如果已展开所有项，则会折叠所有项。
    - “wild” -- 将 Go 命令的 PATH 参数解释为通配符。仅将通配符与文件夹名称进行测试，而不与完整路径进行测试。
    - “regexp” -- 类似于 “wild”，但使用正则表达式。在部分模式下进行匹配，因此必须使用 ^ 和 \$ 来明确匹配名称的开头或结尾。
    - “top” -- 将命令限制为在顶级展开/折叠项目，而忽略嵌套项目。（在作用于通配符/正则表达式或所有选定项目时应用。在通过 PATH 参数指定单个项目时，没有作用。）
    - *示例 1:* `Go PATH=* EXPANDBRANCH=wild,toggleall,top` -- 以组的形式切换所有顶级项。
    - *示例 2:* `Go PATH="~(Hello)" EXPANDBRANCH=wild,toggleall,top` -- 相同，但忽略名为“Hello”的文件夹。
  - `Set EXPANDABLEFOLDERS` -- 切换展开文件夹的功能。（隐藏扩展器可节省少量的水平空间。）
  - `{sourcepath}` 和类似代码现在接受“pair”作为返回文件夹配对的修饰符（如果存在）。例如，`{sourcepath|pair}`。可以与“..”等结合使用。例如，`{sourcepath|pair|..}` 将返回配对的父级。
  - 更进一步的修饰符可以让您选择在配对路径在磁盘上不存在时执行的操作：
    - `{sourcepath|pair|pairgotoparent}` 一直向上到一个级别，直到找到一个存在的文件夹。如果找不到父级，则作用类似于“pairignorepair”。
    - `{sourcepath|pair|pairignorepair}` 如果文件夹不存在则忽略配对，而是检查其它适用的配对。（对于可能相互重叠的 regex 规则很有用。）
    - `{sourcepath|pair|pairuseanyway}` 按原样返回不存在的路径。（如果目的是想 *创建* 对应的文件夹，则很有用。）
- 脚本：
  - `FSUtil.GetFolderPair` 允许脚本查找路径的配对，其中参数控制在磁盘上不存在时发生的情况。返回的对象告诉脚本配对在配置中是如何配置的，以及路径本身。